window.templateType="recommendinfo";function resetPageContent(){if(T.g("recommendinfo_index")){T.g("recommendinfo_index").style.display="none"}}function fillData(c,b){var b=b||{},a=b.type||"";setBodyHeight();json=c;var d=json&&json.rich_info&&json.rich_info.recommend_commodity&&json.rich_info.recommend_commodity[window.poiInfo.index_num];if(!d){return}recommendinfoInfo(d);callAppFun("relayout")}function recommendinfoInfo(h){var g=h,k=[],c=false;if(!(g&&g.image.length)){return}var m=0,f=window.deviceHeight,d=window.deviceWidth,j=d,l=j-16,b=f-20,a=g&&g.image&&(g.image.length*j);k.push('    <div id="wrapper_dish" class="wrapper_dish"  onclick="stopBubble(event);">');k.push('    <div id="scroller_dish" class="dish_pic_list_con" style="width:'+(a+m*2)+'px">');k.push("<ul>");for(var e=0;e<g.image.length;e++){k.push("<div class='dish_item' style='width:"+j+"px'><div class='dish_item_inner'><li><div style='width:"+l+"px;height:"+b+"px;' class='dish_image'><img src='http://map.baidu.com/maps/services/thumbnails?width="+l+"&height="+b+"&align=center,center&src="+g.image[e].imgUrl+"' width='"+l+"px' height='"+b+"px' onload='javascript:scaleImage(this,"+l+","+b+");if(this.parentNode){this.parentNode.style.backgroundImage=\"none\"}' onerror=\"javascript(){}\" style='display:none' /></div><div class='clear_both'></div></li></div></div>")}k.push("</ul>");if(!c){T.g("recommendinfoCon").innerHTML=k.join("");T.g("recommendinfo_index").style.display="";document.getElementsByTagName("title")[0].innerText=g.commodity_name||"网友推荐"}addDishAnimation(g.image.length,j)}function addDishAnimation(c,a){var d=T.g("wrapper_dish")||"";if(!(d)){return}var b=c>1?1:c-1;window.dishScroll=new iScroll(d,{snap:true,momentum:false,hScrollbar:false,vScroll:false,x:-(b*a),currPageX:b,wrapperW:a})}function scaleImage(g,d,a){var b=d,f=a,c=0,e=new Image();e.onload=function(){if(this.width>0&&this.height>0){if(this.width/this.height>=b/f){if(this.width>b){g.width=b;g.height=(this.height*b)/this.width}else{g.width=this.width;g.height=this.height}}else{if(this.height>f){g.height=f;g.width=(this.width*f)/this.height}else{g.width=this.width;g.height=this.height}}g.style.marginTop=((f-g.height)/2-c)+"px";g.style.display="none";g.style.display="block";g.setAttribute("_src","")}};e.src=g.src}function stopBubble(a){if(a&&a.stopPropagation){a.stopPropagation()}else{window.event.cancelBubble=true}}function setBodyHeight(){window.deviceWidth=document.documentElement.clientWidth;window.deviceHeight=document.documentElement.clientHeight};
window.templateType="rebate";function resetPageContent(){if(T.g("rebateInfo")){T.g("rebateInfo").style.display="none"}if(T.g("rebateSrcInfo")){T.g("rebateSrcInfo").style.display="none"}}function fillData(e,c){var c=c||{},b=c.type||{};if(!e){return}var d=e.detail_info&&e.detail_info.rebate,a=e.name;if(!d||d.length<1){return}renderInfo(d,a);addStat(STAT_REBATE_PAGE_INIT);callAppFun("relayout")}function renderInfo(f,e){preprocess(f);var h=['<div class="top-effect"></div>','<div class="discount-effect"></div>',"<ul>","<% for(var i=0, d; d = data[i]; i++) { %>","<li>","<div><%=d.title%></div>",'<p>活动时间：<%=T.date.format(T.date.parse(d.rebate_start),"MM月dd日")%>至<%=T.date.format(T.date.parse(d.rebate_end),"MM月dd日")%>','<div class="circle left"></div><div class="circle right"></div>',"</li>","<% } %>","</ul>",'<div class="bottom-effect">',"<div></div>","<div></div>","</div>",""],b=["来源：","<% for(var i=0, d; d = data[i]; i++) { %>","<span><%=d.cn_name%></span>","<% } %>"],d,a,g,i,e=window.poiInfo.name||e||"查看商户详情";var c=Tutu.Template(h.join("")),j=Tutu.Template(b.join(""));if(a=T.g("rebateInfo")){a.innerHTML=c({data:f});a.style.display=""}if((g=T.g("backToPlace"))&&(i=T.g("backToPlaceCon"))&&window.poiInfo.place_type&&window.poiInfo.place_type=="rebate"){i.innerHTML=e;g.style.display=""}if(d=T.g("rebateSrcInfo")){d.innerHTML=j({data:renderInfo.srcs});d.style.display=""}}function preprocess(c){var b=[];c=T.array.filter(c,function(f,d){return !!f.cn_name&&!!f.from_name&&!!f.rebate_start&&!!f.rebate_end});for(var a=0,e;e=c[a];a++){b.push({from_name:e.from_name,cn_name:e.cn_name})}renderInfo.srcs=T.array.unique(b,function(f,d){return f.from_name==d.from_name})};